### 关于前后端分离的思考

### 前后端不分离存在的问题
1. 前后端开发效率(前端开发需要依靠后端进行开发阶段的测试和调整)
2. 前后端职责不明确(模板层应该属于前端管理，模板原本属于后端渲染)

### 前后端界限的划分
1. 前端负责浏览器
2. 后端负责服务器

### 前后端实际应该负责的职责
1. 前端负责用户体验(数据的展示，ssr，响应式页面)
2. 后端负责业务数据的正确产出(和数据库的交互，保证数据的正确性)

### 前端开发遇到的主要问题
1. 在本地开发的时候，需要启动后端环境，影响开发效率
2. 前端开发html，在转换成模板(jsp...)，后端再通过 数据+模板=页面 产出页面。影响开发效率
3. 本地调试，需要依赖后端数据产出，并且依赖后端的热更新环境(监测文件是否变化来决定是否更新)
4. 前端需要关注用户体验(响应式，直出等，请求转发到cdn，请求资源的缓存),后端只需要保证数据的准确性

### 实现方案
1. SPA(单页面应用)  
    将后端渲染变成了前端渲染，使用json数据进行前后端的交互。  
    目前解决了上述的2问题，即模板层由前端进行管理，后端只需要输出首页。首页进行页面初始化，然后请求后端数据进行渲染。  
    没有解决上述的 1、3、4问题
2. Mock  
    拦截请求。返回与后端约定好的json格式的mock数据，进行前端的测试。  
    在开发模块之前，与后端协商好数据的格式，建立mock文件，在后端开发没有完成之前，通过这一层读取mock数据直接返回结果来进行前端的测试，提高开发效率
3. Proxy(node中间层代理)  
    拦截请求，Mock数据的返回  
    实现热更新文件，检测文件的变化，进行页面的刷新，提高开发效率  
    前端具备对请求的一定的响应能力。监听前端页面的请求，根据需要决定是否将请求转发到后端服务器。可以做一些响应式需求(判断前端的自定义响应头决定是否渲染pc/移动端)  
    服务端的渲染(向后端请求首屏的数据，结合这一层的模板直接输出首屏页面，并在前端判断数据是否已存在决定是否重新请求后端数据),这个性能优化就交到前端这边了。  
    通过CORS标准(node层允许本地请求跨域资源)解决跨域问题(服务器之间没有跨域请求问题)  
    将请求的资源缓存逻辑放到这一层(前端决定如何进行数据的缓存来进行性能的优化),后端只需要关注业务数据的正确产出。